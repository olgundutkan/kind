# Traefik Helm Values
# Chart: traefik/traefik

deployment:
  replicas: 1

service:
  type: NodePort

ports:
  web:
    port: 80
    nodePort: 30080
    exposedPort: 80
  websecure:
    port: 443
    nodePort: 30443
    exposedPort: 443
    tls:
      enabled: true
  traefik:
    port: 9000
    nodePort: 30808
    exposedPort: 9000
    expose:
      default: true

ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`traefik.local.portal.k2.io`)
    entryPoints: ["websecure"]
    
logs:
  general:
    level: INFO
  access:
    enabled: true

# TLS Configuration
tlsStore:
  default:
    defaultCertificate:
      secretName: k2-io-tls

additionalArguments:
  - "--api.insecure=true"
  - "--providers.kubernetesingress.ingressclass=traefik"
  - "--log.level=INFO"

resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"

# Enable Prometheus metrics
metrics:
  prometheus:
    enabled: true
    addEntryPointsLabels: true
    addServicesLabels: true

# Enable access logs
accessLog:
  enabled: true
  format: json
  fields:
    defaultMode: keep
    headers:
      defaultMode: keep
